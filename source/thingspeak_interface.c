/***************************************************************************//**
  @file     thingspeak_interface.c
  @brief    Thingspeak Interface Source File
  @author   Grupo 4
 ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/

#include "uart.h"

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/

// Gateway definitions
#define GW_PREFIX               0xAA, 0x55, 0xC3, 0x3C
#define GW_COMMAND_SEND         0x01
#define GW_COMMAND_KEEPALIVE    0x02
#define GW_ANSWER_SENDDATAOK    0x81
#define GW_ANSWER_SENDDATAFAIL  0xC1
#define GW_ANSWER_KEEPALIVEOK   0x82

/*******************************************************************************
 * ENUMERATIONS AND STRUCTURES AND TYPEDEFS
 ******************************************************************************/



/*******************************************************************************
 * VARIABLES WITH GLOBAL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/



/*******************************************************************************
 * ROM CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

/*******************************************************************************
 * STATIC VARIABLES AND CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

static bool yaInit = false;

static uint8_t sendBuffer[12] = {GW_PREFIX, 0, 0, 0, 0, 0, 0, 0, 0};

/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/

void thingspeak_init(void)
{
  if(!yaInit)
  {
    uart_cfg_t u0Config = {.baudrate=1200, .bitcant=8, .parity=NO_PARITY, .sbns=1};
    uartInit(UART0_ID, u0Config);

    yaInit = true;
  }
}

/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/


/******************************************************************************/
